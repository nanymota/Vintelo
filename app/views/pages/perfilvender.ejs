<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintélo</title>
    <link rel="stylesheet" href="css/perfilvender.css">
    <link rel="icon" href="/imagens/brilhoescuro.png" type="image/x-icon">
</head>
<body>

    <section class="oculto-mobile">
        <header-1>
            <section class="top-bar">
                <p>10% OFF na primeira compra</p>
            </section>
            <section class="main-header">
                <a href="/homevendedor">
                <img src="imagens/logo.png" class="img-logo">
                </a>
                <nav>
                    <a href="/categorias">Vestidos</a>
                    <a href="/categorias">Saias</a>
                    <a href="/categorias">Blusas</a>
                    <a href="/categorias">Calças</a>
                    <a href="/categorias">Categorias</a>
                </nav>
                <section class="search-profile">
                    <form>
                        <input type="text" placeholder="Buscar...">
                    </form>
                    <ul>
                        <li><a href="/sacola" ></a><img src="imagens/icone saco.png" class="img-tamanho"> </li>
                        <li><a href="/menuvendedor" ><img src="<%= brecho && brecho.imagem ? brecho.imagem : '/imagens/icone sem cadastro.png' %>" class="img-tamanho"></a></li>
                        <li><a href="#" ><img src="imagens/icone coraçao.png" class="img-tamanho"> </a></li>
                    </ul>
                </section>
            </section>
          </header>
    </section>

    <section class="oculto-desktop">
    <header>
        <nav class="grid">
          <a href="javascript:void(0)" id="goBackBtn">
           <img src="imagens/seta.png" alt="Seta Voltar">
          </a>
          <img src="imagens/logo.png" alt="Logo">
          <a href="/planos">
           <img src="imagens/icone premium.png" alt="Premium">
          </a>
        </nav>
    </header>
    </section>

    <main>
        <section class="header-container">
            <section class="profile-section">
                <img src="<%= brecho && brecho.imagem ? brecho.imagem : '/imagens/icone sem cadastro.png' %>" alt="<%= brecho ? brecho.nome : 'Loja' %>" class="profile-img">
                <section class="profile-info">
                    <h1><%= brecho ? brecho.nome : 'Nome do Brechó' %></h1>
                    <span class="rating"><%= brecho && brecho.avaliacao ? brecho.avaliacao : '0.0' %> ★★★★★</span>
                </section>
                <a href="/informacao" class="edit-button">✎ Editar</a>
            </section>
        </section>
        
        <section class="store-section">
            <section class="store-info">
                <span><%= brecho && brecho.itens_venda ? brecho.itens_venda : '0' %> à venda</span>
                <span><%= brecho && brecho.vendidos ? brecho.vendidos : '0' %> vendidos</span>
                <span><%= brecho && brecho.seguidores ? brecho.seguidores : '0' %> seguidores</span>
            </section>
            <section class="product-grid">
                <!-- Adicione os produtos conforme o layout -->
            </section>
        </section>

        <section class="container">
            <section class="oculto-mobile">
              <section class="filtro">
                <details open>
                    <summary>Categorias</summary>
                    <section class="categories-grid">
                        <button class="category-btn active" data-category="todos">Todos</button>
                        <button class="category-btn" data-category="vestidos">Vestidos</button>
                        <button class="category-btn" data-category="blusas">Blusas</button>
                        <button class="category-btn" data-category="calcas">Calças</button>
                        <button class="category-btn" data-category="saias">Saias</button>
                        <button class="category-btn" data-category="acessorios">Acessórios</button>
                        <button class="category-btn" data-category="calcados">Calçados</button>
                        <button class="category-btn" data-category="casacos">Casacos</button>
                        <button class="category-btn" data-category="conjuntos">Conjuntos</button>
                        <button class="category-btn" data-category="plus-size">Plus Size</button>
                    </section>
                </details>
                <details open>
                    <summary>Ordenar por</summary>
                    <ul>
                        <li data-sort="recent">Mais recentes</li>
                        <li data-sort="price-low">Menor preço</li>
                        <li data-sort="price-high">Maior preço</li>
                        <li data-sort="popular">Mais populares</li>
                    </ul>
                </details>
                <details open>
                    <summary>Valor</summary>
                    <section class="faixa-valor">
                        <label for="min">Min</label>
                        <input type="range" id="min" min="0" max="500" value="10">
                        <label for="max">Max</label>
                        <input type="range" id="max" min="0" max="500" value="300">
                    </section>
                    <section class="valores">
                        <input type="text" id="min-value" placeholder="10">
                        <input type="text" id="max-value" placeholder="300">
                    </section>
                </details>
                <details open>
                    <summary>Tamanhos</summary>
                    <section class="sizes-grid">
                        <button class="size-btn" data-size="pp">PP</button>
                        <button class="size-btn" data-size="p">P</button>
                        <button class="size-btn" data-size="m">M</button>
                        <button class="size-btn" data-size="g">G</button>
                        <button class="size-btn" data-size="gg">GG</button>
                        <button class="size-btn" data-size="xgg">XGG</button>
                    </section>
                </details>
                <details>
                    <summary>Condição</summary>
                    <ul>
                        <li><input type="checkbox" id="novo"> <label for="novo">Novo</label></li>
                        <li><input type="checkbox" id="seminovo"> <label for="seminovo">Seminovo</label></li>
                        <li><input type="checkbox" id="usado"> <label for="usado">Usado</label></li>
                    </ul>
                </details>
                <button class="button-filtro" id="applyFiltersBtn">APLICAR FILTROS</button>
                <button class="clear-filters" id="clearFiltersBtn">Limpar Filtros</button>
            </section>
            </section>

        <section class="products-section">
                <!-- Adicionar Item -->
                <section class="add-item">
                      <a href="/adicionar"><img src="imagens/add.png" alt="Adicionar Item" class="img-add"></a> 
                        <p class="titulo-add">Adicionar Item à loja</p>
                </section>
                
                <!-- Produtos Dinâmicos -->
                <% if (typeof produtos !== 'undefined' && produtos.length > 0) { %>
                  <% produtos.forEach(function(produto) { %>
                    <article class="product-card" data-category="<%= produto.TIPO_PRODUTO ? produto.TIPO_PRODUTO.toLowerCase() : 'outros' %>">
                        <a href="/produto/<%= produto.ID_PRODUTO %>">
                            <img src="<%= produto.URL_IMG ? produto.URL_IMG : 'imagens/produto-default.png' %>" alt="<%= produto.NOME_PRODUTO %>">
                        </a>
                        <h2><%= produto.NOME_PRODUTO %></h2>
                        <p class="price">R$<%= parseFloat(produto.PRECO || 0).toFixed(2).replace('.', ',') %></p>
                        <p class="descricao">ou em 2x de R$<%= (parseFloat(produto.PRECO || 0) / 2).toFixed(2).replace('.', ',') %></p>
                        <section class="product-actions">
                            <button class="edit-product-btn" data-product-id="<%= produto.ID_PRODUTO %>" title="Editar produto">
                                <img src="imagens/editar.png" alt="Editar">
                            </button>
                            <button class="delete-product-btn" data-product-id="<%= produto.ID_PRODUTO %>" title="Excluir produto">
                                <img src="imagens/lixeira.png" alt="Excluir">
                            </button>
                        </section>
                    </article>
                  <% }); %>
                <% } else { %>
                  <p class="no-products">Nenhum produto cadastrado ainda. <a href="/adicionar">Adicione seu primeiro produto!</a></p>
                <% } %>
            </section>
        </section>

    </main>
    
    <!-- Modal de Edição de Produto -->
    <section id="editProductModal" class="modal" style="display: none;">
        <section class="modal-content">
            <span class="close" id="closeModalBtn">&times;</span>
            <h2>Editar Produto</h2>
            <form id="editProductForm">
                <input type="hidden" id="editProductId">
                
                <section class="form-group">
                    <label for="editNome">Nome do Produto:</label>
                    <input type="text" id="editNome" required>
                </section>
                
                <section class="form-group">
                    <label for="editPreco">Preço (R$):</label>
                    <input type="number" id="editPreco" step="0.01" min="0" required>
                </section>
                
                <section class="form-group">
                    <label for="editDescricao">Descrição:</label>
                    <textarea id="editDescricao" rows="4"></textarea>
                </section>
                
                <section class="form-group">
                    <label for="editTipo">Categoria:</label>
                    <select id="editTipo" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="vestidos">Vestidos</option>
                        <option value="blusas">Blusas</option>
                        <option value="calcas">Calças</option>
                        <option value="saias">Saias</option>
                        <option value="acessorios">Acessórios</option>
                        <option value="calcados">Calçados</option>
                        <option value="casacos">Casacos</option>
                        <option value="conjuntos">Conjuntos</option>
                    </select>
                </section>
                
                <section class="form-group">
                    <label for="editTamanho">Tamanho:</label>
                    <select id="editTamanho">
                        <option value="">Selecione um tamanho</option>
                        <option value="PP">PP</option>
                        <option value="P">P</option>
                        <option value="M">M</option>
                        <option value="G">G</option>
                        <option value="GG">GG</option>
                        <option value="XGG">XGG</option>
                    </select>
                </section>
                
                <section class="form-group">
                    <label for="editCor">Cor:</label>
                    <input type="text" id="editCor">
                </section>
                
                <section class="form-group">
                    <label for="editCondicao">Condição:</label>
                    <select id="editCondicao">
                        <option value="">Selecione a condição</option>
                        <option value="novo">Novo</option>
                        <option value="seminovo">Seminovo</option>
                        <option value="usado">Usado</option>
                    </select>
                </section>
                
                <section class="form-actions">
                    <button type="button" id="cancelEditBtn">Cancelar</button>
                    <button type="submit">Salvar Alterações</button>
                </section>
            </form>
        </section>
    </section>
    
    <br><br>

    <footer class="footer">
        <img src="imagens/logo2.jpeg" alt="Logo" class="footer-image">
        <section class="social-media">
            <p>Siga nossas redes sociais</p>
            <br>
            <ul class="social-links">
                <li><a href="https://facebook.com" target="_blank"><img src="imagens/Facebook.png" alt="Facebook"></a></li>
                <li><a href="https://instagram.com" target="_blank"><img src="imagens/Instagram.png" alt="Instagram"></a></li>
                <li><a href="https://pinterest.com" target="_blank"><img src="imagens/Pinterest.png" alt="Pinterest"></a></li>
            </ul>
        </section>
        <p class="copyright">© 2024, Vintélo. Todos os direitos reservados.</p>
    </footer>

    <script>
        window.isAuthenticated = <%= typeof autenticado !== 'undefined' && autenticado && autenticado.autenticado ? 'true' : 'false' %>;
        <% if (typeof autenticado !== 'undefined' && autenticado && autenticado.tipo) { %>
        window.userType = '<%= autenticado.tipo %>';
        <% } else if (typeof autenticado !== 'undefined' && autenticado && autenticado.autenticado) { %> 
        window.userType = 'c';
        <% } %>
    </script>
    <script src="/js/navegacao.js"></script>
    <script src="/js/favoritos-global.js"></script>
    <script src="/js/carrinho-global.js"></script>
    <script src="/js/busca-global.js"></script>
    <script src="/js/perfilvender.js"></script>

</body>
</html>